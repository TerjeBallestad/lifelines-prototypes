---
phase: 02-character-core
plan: 04
type: execute
wave: 2
depends_on: [02-01]
files_modified:
  - package.json
  - src/components/PersonalityRadar.tsx
  - src/components/CapacitiesRadar.tsx
  - src/components/ResourceGauge.tsx
  - src/components/ResourcePanel.tsx
autonomous: true
user_setup: []

must_haves:
  truths:
    - "PersonalityRadar displays Big Five as pentagon chart"
    - "CapacitiesRadar displays 6 capacities as hexagon chart"
    - "ResourceGauge displays single resource as circular progress"
    - "ResourcePanel displays all 9 resources as flat list of gauges"
  artifacts:
    - path: "src/components/PersonalityRadar.tsx"
      provides: "Radar chart for Big Five"
      exports: ["PersonalityRadar"]
    - path: "src/components/CapacitiesRadar.tsx"
      provides: "Radar chart for 6 capacities"
      exports: ["CapacitiesRadar"]
    - path: "src/components/ResourceGauge.tsx"
      provides: "Single circular gauge component"
      exports: ["ResourceGauge"]
    - path: "src/components/ResourcePanel.tsx"
      provides: "All 9 resource gauges in flat list"
      exports: ["ResourcePanel"]
  key_links:
    - from: "src/components/PersonalityRadar.tsx"
      to: "recharts"
      via: "imports RadarChart components"
      pattern: "import.*from.*recharts"
    - from: "src/components/ResourceGauge.tsx"
      to: "DaisyUI"
      via: "uses radial-progress class"
      pattern: "radial-progress"
---

<objective>
Create visualization components for personality, capacities, and resources.

Purpose: Makes the psychological model visible to the player through intuitive visual representations - radar charts for traits, circular gauges for resources.

Output:
- PersonalityRadar component (pentagon)
- CapacitiesRadar component (hexagon)
- ResourceGauge component (single circular gauge)
- ResourcePanel component (all 9 gauges)
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/02-character-core/02-CONTEXT.md
@.planning/phases/02-character-core/02-RESEARCH.md
@src/entities/types.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install Recharts and create radar components</name>
  <files>package.json, src/components/PersonalityRadar.tsx, src/components/CapacitiesRadar.tsx</files>
  <action>
Install recharts:
```bash
npm install recharts
```

Create PersonalityRadar.tsx following RESEARCH.md pattern:
```tsx
import { observer } from 'mobx-react-lite';
import {
  RadarChart,
  PolarGrid,
  PolarAngleAxis,
  PolarRadiusAxis,
  Radar,
  ResponsiveContainer,
} from 'recharts';
import type { Personality } from '../entities/types';

interface PersonalityRadarProps {
  personality: Personality;
}

export const PersonalityRadar = observer(function PersonalityRadar({
  personality,
}: PersonalityRadarProps) {
  // Full labels per CONTEXT.md decision
  const data = [
    { trait: 'Openness', value: personality.openness },
    { trait: 'Conscientiousness', value: personality.conscientiousness },
    { trait: 'Extraversion', value: personality.extraversion },
    { trait: 'Agreeableness', value: personality.agreeableness },
    { trait: 'Neuroticism', value: personality.neuroticism },
  ];

  return (
    <div className="w-full h-48">
      <ResponsiveContainer width="100%" height="100%">
        <RadarChart data={data}>
          <PolarGrid stroke="oklch(var(--bc) / 0.2)" />
          <PolarAngleAxis
            dataKey="trait"
            tick={{ fontSize: 10, fill: 'oklch(var(--bc) / 0.7)' }}
          />
          <PolarRadiusAxis angle={90} domain={[0, 100]} tick={false} axisLine={false} />
          <Radar
            dataKey="value"
            stroke="oklch(var(--p))"
            fill="oklch(var(--p))"
            fillOpacity={0.4}
          />
        </RadarChart>
      </ResponsiveContainer>
    </div>
  );
});
```

Create CapacitiesRadar.tsx with same pattern but 6 vertices:
- Use Capacities type
- Labels: Divergent, Convergent, Memory, Attention, Speed, Regulation
- Use secondary color (--s) to differentiate from personality
  </action>
  <verify>`npm run build` passes, recharts in package.json</verify>
  <done>PersonalityRadar and CapacitiesRadar components exist and render radar charts</done>
</task>

<task type="auto">
  <name>Task 2: Create ResourceGauge and ResourcePanel components</name>
  <files>src/components/ResourceGauge.tsx, src/components/ResourcePanel.tsx</files>
  <action>
Create ResourceGauge.tsx using DaisyUI radial-progress:
```tsx
import { observer } from 'mobx-react-lite';

interface ResourceGaugeProps {
  value: number;
  label: string;
  maxValue?: number;
  modifierText?: string;
  inverted?: boolean;  // true for stress (high = bad)
  size?: 'sm' | 'md' | 'lg';
}

export const ResourceGauge = observer(function ResourceGauge({
  value,
  label,
  maxValue = 100,
  modifierText,
  inverted = false,
  size = 'md',
}: ResourceGaugeProps) {
  const percentage = Math.round((value / maxValue) * 100);

  // Color based on value (or inverted for stress)
  const getColor = () => {
    const effectiveValue = inverted ? 100 - percentage : percentage;
    if (effectiveValue >= 70) return 'text-success';
    if (effectiveValue >= 30) return 'text-warning';
    return 'text-error';
  };

  const sizeClass = {
    sm: '--size: 3rem;',
    md: '--size: 4rem;',
    lg: '--size: 5rem;',
  }[size];

  return (
    <div className="flex flex-col items-center gap-1">
      <div
        className={`radial-progress ${getColor()}`}
        style={{ '--value': percentage, ...parseStyle(sizeClass) } as React.CSSProperties}
        role="progressbar"
        aria-valuenow={percentage}
        aria-label={label}
      >
        <span className="text-xs font-mono">{Math.round(value)}</span>
      </div>
      <span className="text-xs text-base-content/70 text-center">{label}</span>
      {modifierText && (
        <span className="text-xs text-base-content/50 text-center">{modifierText}</span>
      )}
    </div>
  );
});

// Helper to parse CSS custom property string
function parseStyle(str: string): Record<string, string> {
  const [key, val] = str.split(':').map(s => s.trim().replace(';', ''));
  return { [key]: val };
}
```

Create ResourcePanel.tsx - flat list of all 9 gauges per CONTEXT.md:
```tsx
import { observer } from 'mobx-react-lite';
import { ResourceGauge } from './ResourceGauge';
import type { Resources } from '../entities/types';

interface ResourcePanelProps {
  resources: Resources;
}

const RESOURCE_CONFIG = [
  { key: 'energy', label: 'Energy' },
  { key: 'socialBattery', label: 'Social Battery' },
  { key: 'stress', label: 'Stress', inverted: true },
  { key: 'overskudd', label: 'Overskudd' },
  { key: 'mood', label: 'Mood' },
  { key: 'motivation', label: 'Motivation' },
  { key: 'security', label: 'Security' },
  { key: 'focus', label: 'Focus' },
  { key: 'nutrition', label: 'Nutrition' },
] as const;

export const ResourcePanel = observer(function ResourcePanel({
  resources,
}: ResourcePanelProps) {
  return (
    <div className="grid grid-cols-3 gap-4 p-4">
      {RESOURCE_CONFIG.map(({ key, label, inverted }) => (
        <ResourceGauge
          key={key}
          value={resources[key as keyof Resources]}
          label={label}
          inverted={inverted}
          size="md"
        />
      ))}
    </div>
  );
});
```
  </action>
  <verify>`npm run build` passes, `npm run lint` passes</verify>
  <done>ResourceGauge and ResourcePanel components exist, display all 9 resources</done>
</task>

</tasks>

<verification>
- `npm run build` succeeds
- `npm run lint` passes
- recharts is in package.json dependencies
- PersonalityRadar renders pentagon with 5 labeled vertices
- CapacitiesRadar renders hexagon with 6 labeled vertices
- ResourceGauge shows circular progress with value and label
- ResourcePanel shows all 9 resources in 3x3 grid
</verification>

<success_criteria>
1. Recharts installed and working
2. Radar charts use DaisyUI theme colors (oklch vars)
3. Resource gauges use DaisyUI radial-progress (not external library)
4. All 9 resources displayed in flat list per CONTEXT.md
5. Stress gauge shows inverted coloring (high = red)
</success_criteria>

<output>
After completion, create `.planning/phases/02-character-core/02-04-SUMMARY.md`
</output>
