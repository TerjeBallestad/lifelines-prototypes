---
phase: 03-skills-system
plan: 03
type: execute
wave: 2
depends_on: ["03-01", "03-02"]
files_modified:
  - src/stores/RootStore.ts
  - src/stores/index.tsx
  - src/data/skills.ts
autonomous: true

must_haves:
  truths:
    - "SkillStore is accessible via RootStore"
    - "useSkillStore hook exists for React components"
    - "5-8 skills exist in meaningful dependency tree"
    - "Skills span multiple domains with 1-2 levels of prerequisites"
  artifacts:
    - path: "src/stores/RootStore.ts"
      provides: "RootStore with skillStore property"
      contains: "skillStore"
    - path: "src/stores/index.tsx"
      provides: "useSkillStore hook"
      exports: ["useSkillStore"]
    - path: "src/data/skills.ts"
      provides: "STARTER_SKILLS array with 5-8 skills"
      exports: ["STARTER_SKILLS"]
      min_lines: 30
  key_links:
    - from: "src/stores/RootStore.ts"
      to: "src/stores/SkillStore.ts"
      via: "imports and instantiates SkillStore"
      pattern: "this\\.skillStore = new SkillStore"
    - from: "src/stores/index.tsx"
      to: "src/stores/RootStore.ts"
      via: "useSkillStore accesses skillStore"
      pattern: "useRootStore\\(\\)\\.skillStore"
---

<objective>
Wire SkillStore into RootStore, create useSkillStore hook, and seed initial skill data.

Purpose: Integrate skill system with existing store architecture and provide meaningful test data.
Output: Complete store wiring plus 8 skills across domains with dependency relationships
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-skills-system/03-CONTEXT.md
@.planning/phases/03-skills-system/03-RESEARCH.md
@.planning/phases/03-skills-system/03-01-SUMMARY.md
@.planning/phases/03-skills-system/03-02-SUMMARY.md

# Files to modify
@src/stores/RootStore.ts
@src/stores/index.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Wire SkillStore into RootStore and index</name>
  <files>src/stores/RootStore.ts, src/stores/index.tsx</files>
  <action>
Update src/stores/RootStore.ts:
1. Import SkillStore: import { SkillStore } from './SkillStore';
2. Add property: skillStore: SkillStore;
3. In constructor, after simulationStore: this.skillStore = new SkillStore(this);
4. Remove or update the comment "Future: skillStore, activityStore, talentStore"

Update src/stores/index.tsx:
1. Add useSkillStore convenience hook:
   export function useSkillStore() {
     return useRootStore().skillStore;
   }
2. Add to re-exports at bottom: export { SkillStore } from './SkillStore';
  </action>
  <verify>`npx tsc --noEmit` compiles without errors</verify>
  <done>SkillStore accessible via RootStore.skillStore, useSkillStore hook available</done>
</task>

<task type="auto">
  <name>Task 2: Create skill data with meaningful dependency tree</name>
  <files>src/data/skills.ts</files>
  <action>
Create src/data/skills.ts with STARTER_SKILLS array (8 skills across domains):

Import SkillData from '../entities/types'

Design a meaningful dependency tree representing adult life skills (SKIL-01):

Social Domain (3 skills, chain):
1. 'eye-contact' - "Eye Contact" - no prerequisites
   Description: "Maintain brief eye contact during conversation"
2. 'small-talk' - "Small Talk" - requires: ['eye-contact']
   Description: "Exchange pleasantries with acquaintances"
3. 'phone-call' - "Phone Call" - requires: ['small-talk']
   Description: "Make and receive phone calls"

Organisational Domain (2 skills, chain):
4. 'make-list' - "Make a List" - no prerequisites
   Description: "Create simple to-do lists"
5. 'follow-routine' - "Follow Routine" - requires: ['make-list']
   Description: "Stick to a basic daily routine"

Physical Domain (3 skills, branching DAG):
6. 'go-outside' - "Go Outside" - no prerequisites
   Description: "Leave the house briefly"
7. 'walk-neighborhood' - "Walk Neighborhood" - requires: ['go-outside']
   Description: "Take short walks around the block"
8. 'go-to-store' - "Go to Store" - requires: ['go-outside', 'make-list'] (cross-domain!)
   Description: "Visit a nearby store with a shopping list"

This creates:
- 8 skills total (meets INFR-03: 5-8 skills)
- 3 domains represented
- Max depth of 2 (eye-contact -> small-talk -> phone-call)
- Cross-domain dependency (go-to-store needs organisational + physical)
- Multiple root skills (eye-contact, make-list, go-outside)

Export as: export const STARTER_SKILLS: SkillData[] = [...]
  </action>
  <verify>`npx tsc --noEmit` compiles without errors</verify>
  <done>8 skills defined with meaningful dependency relationships across 3 domains</done>
</task>

<task type="auto">
  <name>Task 3: Seed skills on store initialization</name>
  <files>src/stores/SkillStore.ts</files>
  <action>
Update src/stores/SkillStore.ts constructor to seed skills:

1. Import STARTER_SKILLS: import { STARTER_SKILLS } from '../data/skills';

2. In constructor, after initializing domainXP, call:
   this.seedSkills(STARTER_SKILLS);

3. Optionally, add some starting XP for testing (can remove later):
   // Starting XP for testing unlocks
   this.domainXP.set('social', 100);
   this.domainXP.set('organisational', 50);
   this.domainXP.set('physical', 100);

This ensures skills are available immediately when app loads.
  </action>
  <verify>
1. `npx tsc --noEmit` compiles
2. `npm run dev` starts and console shows no cycle warnings from validateDAG
  </verify>
  <done>Skills auto-seeded on store creation, no DAG cycle warnings</done>
</task>

</tasks>

<verification>
1. TypeScript compiles: `npx tsc --noEmit`
2. App starts: `npm run dev` with no console errors
3. RootStore.skillStore is accessible
4. useSkillStore() hook works in components
5. 8 skills seeded with correct dependency relationships
6. No DAG cycle warning in console
</verification>

<success_criteria>
- SkillStore wired into RootStore (follows CharacterStore pattern)
- useSkillStore convenience hook available
- 8 skills exist across 3 domains (social, organisational, physical)
- Dependency tree has depth 1-2, includes cross-domain link (SKIL-02)
- Skills auto-seed on app load
- validateDAG passes (no cycles)
</success_criteria>

<output>
After completion, create `.planning/phases/03-skills-system/03-03-SUMMARY.md`
</output>
