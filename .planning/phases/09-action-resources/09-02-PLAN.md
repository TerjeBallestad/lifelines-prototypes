---
phase: 09-action-resources
plan: 02
type: execute
wave: 2
depends_on: ["09-01"]
files_modified:
  - src/components/ActionResourcesSection.tsx
  - src/components/NeedsPanel.tsx
  - src/components/CharacterPanel.tsx
autonomous: true

must_haves:
  truths:
    - "Action Resources section is visually separated from Primary Needs and Derived Wellbeing"
    - "Each action resource displays with a single color (not threshold-based)"
    - "Hovering on Overskudd shows breakdown tooltip with Mood, Energy, Purpose contributions"
    - "Hovering on socialBattery shows personality effect (introvert/extrovert indicator)"
  artifacts:
    - path: "src/components/ActionResourcesSection.tsx"
      provides: "ActionResourcesSection component"
      exports: ["ActionResourcesSection"]
    - path: "src/components/NeedsPanel.tsx"
      provides: "Integration with ActionResourcesSection"
      contains: "ActionResourcesSection"
  key_links:
    - from: "src/components/NeedsPanel.tsx"
      to: "src/components/ActionResourcesSection.tsx"
      via: "component import and render"
      pattern: "import.*ActionResourcesSection"
    - from: "src/components/ActionResourcesSection.tsx"
      to: "src/entities/types.ts"
      via: "ActionResources type"
      pattern: "import.*ActionResources"
---

<objective>
Create ActionResourcesSection component to display the four action resources (Overskudd, socialBattery, Focus, Willpower) with tooltip breakdowns, integrated into NeedsPanel.

Purpose: Give players visibility into their action resources and understand what affects them, enabling informed activity decisions.
Output: New ActionResourcesSection component with progress bars and tooltips, rendered in NeedsPanel below Derived Wellbeing.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/09-action-resources/09-CONTEXT.md
@src/components/NeedsPanel.tsx
@src/components/DerivedStatsSection.tsx
@src/entities/types.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create ActionResourcesSection component</name>
  <files>src/components/ActionResourcesSection.tsx</files>
  <action>
Create new component following DerivedStatsSection pattern:

1. Interface ActionResourcesSectionProps:
   - actionResources: ActionResources
   - overskuddBreakdown: StatBreakdown
   - socialBatteryBreakdown: StatBreakdown
   - focusBreakdown: StatBreakdown
   - willpowerBreakdown: StatBreakdown
   - extraversion: number (for showing introvert/extrovert indicator)

2. Component structure:
   - Wrapper div with border-t border-base-300 pt-4 mt-4 (visual separation)
   - h4 header: "Action Resources" (uppercase, tracking-wide)
   - Grid layout with gap-4 for the four resources

3. Each resource row (use grid grid-cols-2 gap-4):
   - Label with single consistent color per resource type:
     * Overskudd: progress-primary (blue)
     * socialBattery: progress-secondary (purple/pink)
     * Focus: progress-accent (teal)
     * Willpower: progress-warning (amber/yellow)
   - Progress bar (DaisyUI progress component, h-2)
   - Value display (rounded percentage)

4. Tooltip breakdown on hover (use DaisyUI tooltip):
   - For Overskudd: Show "Mood (X) + Energy (Y) + Purpose (Z) = Total"
   - For socialBattery: Show personality effect ("Introvert: charges when alone" or "Extrovert: charges in social settings")
   - For Focus: Show "Full capacity - depleted by concentration activities"
   - For Willpower: Show "Mental reserves - rebuilds through rest and fun"

5. Add personality indicator below socialBattery:
   - If extraversion < 40: show "Introvert" badge
   - If extraversion > 60: show "Extrovert" badge
   - If 40-60: show "Ambivert" badge
   - Use small text (text-xs) with appropriate styling

6. Export the component as observer (mobx-react-lite)
  </action>
  <verify>TypeScript compiles: `npm run build` passes. Component file exists and exports ActionResourcesSection.</verify>
  <done>ActionResourcesSection.tsx exists with all four resource displays, each with single color and tooltip breakdown</done>
</task>

<task type="auto">
  <name>Task 2: Integrate ActionResourcesSection into NeedsPanel</name>
  <files>src/components/NeedsPanel.tsx</files>
  <action>
1. Import ActionResourcesSection from './ActionResourcesSection'

2. Update NeedsPanelProps interface to add:
   - actionResources?: ActionResources
   - overskuddBreakdown?: StatBreakdown
   - socialBatteryBreakdown?: StatBreakdown
   - focusBreakdown?: StatBreakdown
   - willpowerBreakdown?: StatBreakdown
   - extraversion?: number

3. Add ActionResourcesSection render after DerivedStatsSection:
   - Only render if actionResources is available (same pattern as derivedStats)
   - Pass all breakdown props and extraversion

4. Update parent component (CharacterPanel or wherever NeedsPanel is used) to pass the new props:
   - Get actionResources from character.actionResources
   - Get breakdowns from character computed getters
   - Get extraversion from character.personality.extraversion

Note: Check CharacterPanel.tsx and update it to pass the new props to NeedsPanel.
  </action>
  <verify>Open browser, enable v1.1 mode, verify Action Resources section appears below Derived Wellbeing with all four resources displayed.</verify>
  <done>NeedsPanel renders ActionResourcesSection when v1.1 mode enabled, all four resources visible with tooltips</done>
</task>

<task type="auto">
  <name>Task 3: Wire up CharacterPanel to pass action resources</name>
  <files>src/components/CharacterPanel.tsx</files>
  <action>
1. Update the NeedsPanel usage in CharacterPanel to pass new props:
   - actionResources={character.actionResources}
   - overskuddBreakdown={character.overskuddBreakdown}
   - socialBatteryBreakdown={character.socialBatteryBreakdown}
   - focusBreakdown={character.focusBreakdown}
   - willpowerBreakdown={character.willpowerBreakdown}
   - extraversion={character.personality.extraversion}

2. Ensure these props are only passed when character has actionResources initialized (conditional rendering pattern)

This wires up the computed breakdowns from Character to the UI display.
  </action>
  <verify>Open browser, enable v1.1 mode with simulation running. Action Resources section shows values that update as simulation ticks. Hover tooltips show breakdown information.</verify>
  <done>CharacterPanel passes all action resources props to NeedsPanel, values update in real-time</done>
</task>

</tasks>

<verification>
1. Build passes: `npm run build` with no TypeScript errors
2. In browser with v1.1 enabled: Action Resources section appears below Derived Wellbeing
3. Each resource has its own color (Overskudd=blue, socialBattery=purple, Focus=teal, Willpower=amber)
4. Hovering Overskudd shows breakdown: "Mood (X) + Energy (Y) + Purpose (Z)"
5. Personality indicator shows correctly based on Extraversion slider
6. Values update as simulation runs
</verification>

<success_criteria>
- ActionResourcesSection.tsx exists and exports observer component
- NeedsPanel renders ActionResourcesSection below DerivedStatsSection
- All four resources display with single color (not threshold-based)
- Tooltip breakdowns show contributing factors
- Personality indicator (Introvert/Extrovert/Ambivert) displays for socialBattery
- Values update reactively as simulation ticks
</success_criteria>

<output>
After completion, create `.planning/phases/09-action-resources/09-02-SUMMARY.md`
</output>
