---
phase: 09.1-activity-difficulty
plan: 03
type: execute
wave: 3
depends_on: ["09.1-02"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "Player sees difficulty stars on activity cards"
    - "Different skill levels produce different star counts"
    - "Tooltip shows skill contribution breakdown"
    - "Stars are color-coded by difficulty level"
    - "Personalized difficulty responds to skill changes"
  artifacts: []
  key_links: []
---

<objective>
Verify all Phase 9.1 success criteria through human testing of the difficulty system UI and calculations.

Purpose: Confirm difficulty ratings work correctly before integrating with resource costs in Phase 10.
Output: Verified phase completion or identified issues for gap closure.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/09.1-activity-difficulty/09.1-CONTEXT.md

# Prior plan outputs
@.planning/phases/09.1-activity-difficulty/09.1-01-SUMMARY.md
@.planning/phases/09.1-activity-difficulty/09.1-02-SUMMARY.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Activity difficulty system with:
- Base difficulty ratings (1-5 stars) on all activities
- Skill requirements with weighted contributions
- Personalized effective difficulty calculated per patient
- Visual stars with color coding (green/yellow/red)
- Tooltip breakdown showing skill and mastery contributions
  </what-built>
  <how-to-verify>
1. Start dev server: `npm run dev`
2. Open http://localhost:5173 (or configured port)
3. Create or select a character with some skills leveled up

**Test 1: Difficulty Stars Visibility**
- Navigate to activity selection panel
- Verify each activity shows 1-5 difficulty stars
- Verify stars are color-coded (green = easy 1-2★, yellow = medium 3★, red = hard 4-5★)

**Test 2: Tooltip Breakdown**
- Hover over difficulty stars on an activity
- Verify tooltip appears showing:
  - Base difficulty (e.g., "Base: 4★")
  - Skill reduction (e.g., "Skills: -0.8★")
  - Mastery reduction (e.g., "Mastery: -0.3★")
  - Per-skill details (skill name, level, contribution)

**Test 3: Personalized Difficulty**
- Note the effective difficulty for "Practice Phone Call" (base 4★)
- Use skill panel to level up "Phone Call" skill
- Return to activity panel
- Verify stars decreased (skill reduced difficulty)
- Expected: Each skill level should reduce difficulty by diminishing amount

**Test 4: Different Activities Different Difficulty**
- Compare "Rest" (should be 1★, green)
- Compare "Visit Store" (should be 4★, red)
- Compare "Chat with Neighbor" (should be 2★, green)

**Test 5: No Crash on Missing Skills**
- Create a new character with no skills
- Verify activities still show base difficulty
- Verify no console errors

Report any issues found.
  </how-to-verify>
  <resume-signal>Type "approved" if all tests pass, or describe specific issues found</resume-signal>
</task>

</tasks>

<verification>
Phase 9.1 success criteria from ROADMAP.md:
1. ✓ Each activity has a difficulty rating that affects Overskudd/Willpower/Focus costs
   - (Costs integration deferred to Phase 10, but difficulty ratings exist)
2. ✓ Skill level reduces effective difficulty (skilled patient finds activity easier)
3. ✓ Personality alignment modifies difficulty (aligned activities feel easier)
   - (Note: CONTEXT.md clarifies personality affects gains/costs, NOT difficulty stars)
4. ✓ Player can see difficulty rating and cost breakdown before selecting activity
5. ✓ Difficulty calculations integrate with action resource gating from Phase 9
   - (Integration ready, full cost scaling in Phase 10)
</verification>

<success_criteria>
- Human verifies all 5 tests pass
- No visual bugs or console errors
- Difficulty system is usable and understandable
- Phase ready for Phase 10 (Activity-Need Integration)
</success_criteria>

<output>
After completion, create `.planning/phases/09.1-activity-difficulty/09.1-03-SUMMARY.md`
</output>
