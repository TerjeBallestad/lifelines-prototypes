# Phase 9.1: Activity Difficulty - Context

**Gathered:** 2026-01-23
**Status:** Ready for planning

<domain>
## Phase Boundary

Activities have difficulty ratings that determine resource costs. Effective difficulty is calculated from base difficulty, required skill levels (weighted by relevance), and activity mastery. This phase establishes the difficulty system and UI; activity-need integration (what activities restore) is Phase 10.

</domain>

<decisions>
## Implementation Decisions

### Difficulty Display
- 5-star rating system (★★★★★)
- Green-to-red color gradient based on difficulty (1★ green, 3★ yellow, 5★ red)
- Shows EFFECTIVE difficulty (personal to this patient), not base difficulty
- Same activity shows different stars for different patients based on their skills/mastery

### Cost Scaling Formula
- Additive model: skills reduce some, mastery reduces more, both contribute independently
- Multi-skill activities: weighted by relevance (primary skills matter more than secondary)
- Personality alignment is SEPARATE from difficulty — affects resource gains (primary) and costs (secondary), not difficulty stars
- Can reach 1★ minimum but with heavy diminishing returns (must be significantly overtrained)

### Base Difficulty Design
- Hybrid: base difficulty configured per activity + skill requirements add complexity
- Explicit activity variants at different difficulties ('Quick snack' 1★, 'Cook full meal' 3★, 'Gourmet dinner' 5★)
- Harder variants unlock via skill levels (need certain skills before variant appears)
- Underqualified attempts: higher costs, reduced rewards, AND risk of failure

### Cost Breakdown UI
- Tooltip on hover (native Popover API, matches Phase 9 pattern)
- Full breakdown with modifiers: Base 5★, Skill -1★, Mastery -1★ = 3★ effective
- Full skill breakdown visible: each contributing skill with its level's reduction shown
- Affordability: color coded (green/red) AND shows before/after ("Overskudd: 45 → 25")

### Claude's Discretion
- Exact diminishing returns curve for difficulty reduction
- Star icon styling and animation
- Tooltip layout and formatting
- How requirements add to base difficulty

</decisions>

<specifics>
## Specific Ideas

- Activity mastery is separate from skills — mastery is practice on THIS activity, skills are general abilities
- Activities don't have 1:1 skill mapping (no "cooking skill for cooking activity") — they have skill requirements with weights
- Effective difficulty calculation: base - (weighted skill contribution) - (mastery contribution), with diminishing returns

</specifics>

<deferred>
## Deferred Ideas

None — discussion stayed within phase scope

</deferred>

---

*Phase: 09.1-activity-difficulty*
*Context gathered: 2026-01-23*
