---
phase: 06-integration-observation
plan: 02
type: execute
wave: 2
depends_on: ["06-01"]
files_modified:
  - src/data/archetypes.ts
  - src/stores/CharacterStore.ts
  - src/components/DevToolsPanel.tsx
autonomous: true

must_haves:
  truths:
    - "6 preset archetypes exist covering Big Five extremes"
    - "User can select an archetype to replace current character"
    - "Randomize button creates character with random personality"
    - "Archetypes produce visibly different initial personalities"
  artifacts:
    - path: "src/data/archetypes.ts"
      provides: "Preset character archetypes"
      exports: ["ARCHETYPES", "createArchetypeCharacter", "createRandomCharacter"]
  key_links:
    - from: "src/components/DevToolsPanel.tsx"
      to: "src/data/archetypes.ts"
      via: "import and dropdown"
      pattern: "ARCHETYPES|createArchetypeCharacter|createRandomCharacter"
    - from: "src/stores/CharacterStore.ts"
      to: "src/data/archetypes.ts"
      via: "createFromArchetype method"
      pattern: "createArchetypeCharacter"
---

<objective>
Create preset character archetypes for emergence testing.

Purpose: Allow quick creation of contrasting characters (Hermit vs Social Butterfly) to validate that different personalities produce different observable behaviors.

Output:
- `src/data/archetypes.ts` with 6 archetypes and factory functions
- CharacterStore method to create from archetype
- DevToolsPanel archetype selector and randomize button
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-integration-observation/06-CONTEXT.md
@.planning/phases/06-integration-observation/06-RESEARCH.md
@.planning/phases/06-integration-observation/06-01-SUMMARY.md

@src/entities/types.ts (Personality, Capacities, Resources, CharacterData)
@src/stores/CharacterStore.ts
@src/components/DevToolsPanel.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Archetype data and factory functions</name>
  <files>src/data/archetypes.ts</files>
  <action>
Create `src/data/archetypes.ts`:

1. Define `ArchetypeConfig` type:
```typescript
type ArchetypeConfig = {
  id: string;
  name: string;
  description: string;
  personality: Personality;
  expectedBehavior: string; // What we expect to observe
};
```

2. Create `ARCHETYPES` array with 6 contrasting archetypes using extreme values (10 or 90) per RESEARCH.md:

   a. **The Hermit** (E:10, N:90)
      - "Introverted, anxious"
      - Expected: "Social battery drains quickly, stress builds easily, avoids social activities"

   b. **The Social Butterfly** (E:90, N:10)
      - "Extraverted, resilient"
      - Expected: "Thrives on social interaction, low stress, mood stays positive"

   c. **The Perfectionist** (C:90, N:70)
      - "Highly conscientious, anxious"
      - Expected: "Focus drains slowly, motivation stable, stressed by failure"

   d. **The Free Spirit** (O:90, C:10)
      - "Open, disorganized"
      - Expected: "Focus drains quickly, motivation unstable, overskudd varies"

   e. **The Competitor** (C:90, A:10)
      - "Driven, disagreeable"
      - Expected: "Social battery drains, focus stable, motivation high"

   f. **The Peacemaker** (A:90, N:10)
      - "Agreeable, calm"
      - Expected: "Social battery recovers quickly, mood stable, stress low"

3. Create `createArchetypeCharacter(archetypeId: string): CharacterData`:
   - Find archetype by id
   - Return CharacterData with:
     - id: crypto.randomUUID()
     - name: archetype.name
     - personality: archetype.personality
     - capacities: defaultCapacities() (use base capacities, talents modify later)
     - resources: defaultResources()

4. Create `createRandomCharacter(): CharacterData`:
   - Generate random personality (Math.random() * 100 for each trait)
   - Use name "Random Character"
   - Use defaultCapacities() and defaultResources()
  </action>
  <verify>
`npx tsc --noEmit` passes
Import works: `import { ARCHETYPES } from './data/archetypes'`
  </verify>
  <done>
6 archetypes defined with extreme traits, factory functions create valid CharacterData
  </done>
</task>

<task type="auto">
  <name>Task 2: Archetype selection in DevToolsPanel</name>
  <files>src/stores/CharacterStore.ts, src/components/DevToolsPanel.tsx</files>
  <action>
1. Update `src/stores/CharacterStore.ts`:
   - Import `CharacterData` type
   - Add method `createFromData(data: CharacterData): Character`:
     ```typescript
     createFromData(data: CharacterData): Character {
       this.character = new Character(data);
       this.character.setRootStore(this.root);
       return this.character;
     }
     ```

2. Update `src/components/DevToolsPanel.tsx`:
   - Import ARCHETYPES, createArchetypeCharacter, createRandomCharacter from data/archetypes
   - Import useCharacterStore

   Add new section after Balance Parameters:
   ```tsx
   <div className="divider text-sm">Character Presets</div>

   {/* Archetype dropdown */}
   <div className="form-control">
     <label className="label py-1">
       <span className="label-text text-xs">Load Archetype</span>
     </label>
     <select
       className="select select-sm select-bordered"
       defaultValue=""
       onChange={(e) => {
         if (e.target.value) {
           const data = createArchetypeCharacter(e.target.value);
           characterStore.createFromData(data);
           e.target.value = ''; // Reset select
         }
       }}
     >
       <option value="" disabled>Select archetype...</option>
       {ARCHETYPES.map(arch => (
         <option key={arch.id} value={arch.id}>
           {arch.name} - {arch.description}
         </option>
       ))}
     </select>
   </div>

   {/* Randomize button */}
   <button
     onClick={() => {
       const data = createRandomCharacter();
       characterStore.createFromData(data);
     }}
     className="btn btn-sm btn-outline mt-2 w-full"
   >
     Randomize Character
   </button>
   ```

   Note: Selecting an archetype or clicking Randomize replaces the current character entirely. This resets skills, activities, talents - which is expected for testing emergence from scratch.
  </action>
  <verify>
Run `npm run dev`:
1. Open Dev Tools panel
2. Select "The Hermit" - see character name change, personality radar show extreme values
3. Select "The Social Butterfly" - see opposite personality shape
4. Click "Randomize Character" - see random personality values
  </verify>
  <done>
Archetype selector and Randomize button work, character personality visibly changes
  </done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` passes
2. `npm run dev` works
3. Can switch between archetypes
4. Personality radar shows distinct shapes for different archetypes
5. Randomize creates varied characters
</verification>

<success_criteria>
- 6 archetypes exist with extreme Big Five traits
- Archetype selector replaces current character
- Randomize button creates random personality
- Different archetypes show visibly different personality radars
</success_criteria>

<output>
After completion, create `.planning/phases/06-integration-observation/06-02-SUMMARY.md`
</output>
